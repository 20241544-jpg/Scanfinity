<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Scanfinity — ICT learning through play</title>
  <meta name="description" content="Scanfinity: Scan the QR to start an endless, fun ICT learning journey with quizzes, guessing games and interactive activities." />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#6EE7B7; --muted:#9AA4B2; --glass: rgba(255,255,255,0.03);
      --radius:14px; --glass-2: rgba(255,255,255,0.02);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial;background:linear-gradient(180deg,#041029 0%, #071426 100%);color:#e6eef6;}
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 28px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#60A5FA);display:flex;align-items:center;justify-content:center;font-weight:700;color:#052024}
    h1{font-size:20px;margin:0}
    p.lead{margin:4px 0 0;color:var(--muted);font-size:13px}

    main{display:grid;grid-template-columns:1fr 420px;gap:26px;padding:22px 28px}
    .left{padding:18px;background:linear-gradient(180deg,var(--glass),var(--glass-2));border-radius:18px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
    .right{padding:18px;border-radius:18px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);}

    .hero{display:flex;gap:18px;align-items:center}
    .scan-card{width:280px;height:280px;background:#fff;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#051125}
    #qrcode{width:86%;height:86%;}
    .instructions{color:var(--muted);font-size:14px}

    .activities{margin-top:18px;display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    .card{background:linear-gradient(180deg,#07172a, #04101a);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    .card h3{margin:0 0 8px;font-size:15px}
    .card p{margin:0;color:var(--muted);font-size:13px}
    .btn{display:inline-block;padding:8px 12px;border-radius:9px;background:linear-gradient(90deg,#60A5FA,#6EE7B7);color:#052024;font-weight:700;text-decoration:none;border:none;cursor:pointer}
    .muted{color:var(--muted);font-size:13px}

    .game-area{margin-top:12px}
    .quiz{display:none}
    .guess{display:none}
    .flash{display:none}

    footer{padding:18px 28px;color:var(--muted);font-size:13px}

    /* responsive */
    @media (max-width:980px){main{grid-template-columns:1fr;}.right{order:2}}

    /* small interactive styles */
    .result{margin-top:8px;padding:10px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent)}

    /* leaderboards */
    .leaderboard{max-height:180px;overflow:auto;padding-right:6px}
    .row{display:flex;justify-content:space-between;padding:8px 6px;border-bottom:1px dashed rgba(255,255,255,0.02)}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">Sf</div>
      <div>
        <h1>Scanfinity</h1>
        <p class="lead">Scan the QR to start a playful ICT learning journey</p>
      </div>
    </div>
    <nav class="muted">Made for students • Interactive • Free</nav>
  </header>

  <main>
    <section class="left">
      <div class="hero">
        <div>
          <div class="scan-card" id="scanCard">
            <!-- Real QR code generated here -->
            <div id="qrcode"></div>
          </div>
          <p class="instructions">Scan this QR code with your phone camera to enter the Scanfinity site. Or press <strong>Start</strong> below to simulate scanning.</p>
        </div>
        <div style="flex:1">
          <h2 style="margin:0 0 6px">Welcome to Scanfinity</h2>
          <p class="muted">An endless, enjoyable journey of ICT learning through micro-games and activities — perfect for ICT students and curious learners.</p>

          <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" id="startBtn">Start (Test)</button>
            <button class="btn" id="resumeBtn">Resume last</button>
            <button class="btn" id="helpBtn" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)">How it works</button>
          </div>

          <div class="game-area" id="gameArea">
            <div class="activities">
              <div class="card">
                <h3>Quick Quiz</h3>
                <p>Short multiple-choice quizzes about ICT fundamentals.</p>
                <div style="margin-top:8px"><button class="btn" data-game="quiz">Play Quiz</button></div>
              </div>

              <div class="card">
                <h3>Guess the Term</h3>
                <p>Word-guessing game based on ICT topics — hints included.</p>
                <div style="margin-top:8px"><button class="btn" data-game="guess">Play Guess</button></div>
              </div>

              <div class="card">
                <h3>Flash Facts</h3>
                <p>Swipe through quick flashcards for fast recall.</p>
                <div style="margin-top:8px"><button class="btn" data-game="flash">Open Flashcards</button></div>
              </div>

              <div class="card">
                <h3>Leaderboard</h3>
                <p>See top scorers from your device (local only).</p>
                <div style="margin-top:8px"><button class="btn" data-game="leader">View</button></div>
              </div>
            </div>

            <div id="dynamic" style="margin-top:12px"></div>
          </div>

        </div>
      </div>
    </section>

    <aside class="right">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <h3 style="margin:0">Session</h3>
          <p class="muted" id="sessionInfo">Not started</p>
        </div>
        <div>
          <small class="muted">v1.1</small>
        </div>
      </div>

      <div style="margin-top:18px" class="card">
        <h3 style="margin-top:0">How teachers use it</h3>
        <p class="muted">Print or display the QR code on the left. When students scan, they land directly into the learning experience. Use classroom mode to rotate activities.</p>
      </div>

      <div style="margin-top:12px" class="card">
        <h3 style="margin-top:0">Settings</h3>
        <p class="muted">Class code (optional): <input id="classCode" placeholder="e.g. MATH201" style="background:transparent;border:1px solid rgba(255,255,255,0.04);padding:6px;border-radius:8px;color:#e6eef6"></p>
      </div>

      <div style="margin-top:12px" class="card">
        <h3 style="margin-top:0">Top Scores (local)</h3>
        <div class="leaderboard" id="leaderboard"></div>
      </div>

    </aside>
  </main>

  <footer>
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>© Scanfinity — Built with ❤️ for learners</div>
      <div class="muted">Try on a desktop or mobile — QR entry recommended</div>
    </div>
  </footer>

  <script>
    // Generate the QR code dynamically to point to the current page
    new QRCode(document.getElementById("qrcode"), {
      text: window.location.href.split('?')[0] + "?start=1",
      width: 240,
      height: 240,
      colorDark : "#000000",
      colorLight : "#ffffff",
      correctLevel : QRCode.CorrectLevel.H
    });

    // ---------- Sample dataset (replace or expand) ----------
    const QUIZ_BANK = [
      {q:'What does CPU stand for?', choices:['Central Processing Unit','Computer Primary Unit','Control Program Unit','Central Performance Utility'], a:0},
      {q:'Which layer handles routing on the internet?', choices:['Transport','Network','Application','Data Link'], a:1},
      {q:'HTML is used to:', choices:['Style a webpage','Structure a webpage','Store data','Run programs'], a:1},
      {q:'Which is NOT an operating system?', choices:['Windows','Linux','Photoshop','macOS'], a:2}
    ];

    const GUESS_WORDS = [
      {word:'algorithm', hint:'A step-by-step procedure for calculations'},
      {word:'router', hint:'Directs traffic between networks'},
      {word:'bandwidth', hint:'Amount of data transferred per second'},
      {word:'encryption', hint:'Converts data to unreadable form to protect it'}
    ];

    const FLASH = [
      {front:'IP Address', back:'A unique address that identifies a device on the internet.'},
      {front:'DNS', back:'Domain Name System — translates domain names to IPs.'},
      {front:'HTTP', back:'HyperText Transfer Protocol — foundation of data communication on the web.'}
    ];
    // --------------------------------------------------------

    const startBtn = document.getElementById('startBtn');
    const resumeBtn = document.getElementById('resumeBtn');
    const helpBtn = document.getElementById('helpBtn');
    const dynamic = document.getElementById('dynamic');
    const sessionInfo = document.getElementById('sessionInfo');
    const leaderboardEl = document.getElementById('leaderboard');

    function setSession(text){ sessionInfo.textContent = text; }

    function showQuiz(){
      dynamic.innerHTML = '';
      const container = document.createElement('div'); container.className='quiz'; container.style.display='block';
      let idx = 0; let score=0;
      const qBox = document.createElement('div');
      renderQuestion();
      function renderQuestion(){
        qBox.innerHTML = '';
        const item = QUIZ_BANK[idx];
        const h = document.createElement('h3'); h.textContent = `Q${idx+1}. ${item.q}`;
        qBox.appendChild(h);
        item.choices.forEach((c,i)=>{
          const b = document.createElement('button'); b.className='btn'; b.style.margin='6px 6px 0 0'; b.textContent=c; b.onclick=()=>{ if(i===item.a){score++; showResult(true)}else{showResult(false)} }
          qBox.appendChild(b);
        });
        dynamic.appendChild(qBox);
      }
      function showResult(correct){
        const r = document.createElement('div'); r.className='result'; r.textContent = correct? 'Correct! 🎉' : 'Wrong — keep going.';
        qBox.appendChild(r);
        idx++;
        setTimeout(()=>{
          r.remove();
          if(idx < QUIZ_BANK.length){ renderQuestion(); } else { finish(); }
        },800);
      }
      function finish(){
        qBox.innerHTML = `<h3>Quiz finished</h3><p class=\"muted\">Score: ${score}/${QUIZ_BANK.length}</p>`;
        const name = prompt('Enter your name for the local leaderboard (or Cancel)');
        if(name){ saveScore(name,score); renderLeaderboard(); }
      }
    }

    function showGuess(){
      dynamic.innerHTML='';
      const container = document.createElement('div'); container.className='guess'; container.style.display='block';
      const idx = Math.floor(Math.random()*GUESS_WORDS.length);
      const item = GUESS_WORDS[idx];
      const h = document.createElement('h3'); h.textContent = 'Guess the term';
      const hint = document.createElement('p'); hint.className='muted'; hint.textContent = 'Hint: ' + item.hint;
      const input = document.createElement('input'); input.placeholder='Type your guess here'; input.style.padding='8px'; input.style.borderRadius='8px'; input.style.width='100%'; input.style.marginTop='8px';
      const b = document.createElement('button'); b.className='btn'; b.textContent='Submit'; b.style.marginTop='8px';
      const out = document.createElement('div'); out.className='result'; out.style.display='none';
      b.onclick = ()=>{
        const val = input.value.trim().toLowerCase();
        if(!val) return;
        if(val === item.word){ out.style.display='block'; out.textContent='Correct! '+item.word+' — well done 🎉';
          const name = prompt('Enter your name for the local leaderboard (or Cancel)'); if(name){ saveScore(name,1); renderLeaderboard(); }
        } else { out.style.display='block'; out.textContent='Not quite — try again!'; }
      }
      container.appendChild(h); container.appendChild(hint); container.appendChild(input); container.appendChild(b); container.appendChild(out);
      dynamic.appendChild(container);
    }

    function showFlash(){
      dynamic.innerHTML='';
      const container = document.createElement('div'); container.className='flash'; container.style.display='block';
      let idx = 0;
      const card = document.createElement('div'); card.style.padding='18px'; card.style.borderRadius='12px'; card.style.background='linear-gradient(180deg,#081526, #021018)';
      const front = document.createElement('h3'); front.textContent = FLASH[idx].front; const back = document.createElement('p'); back.className='muted'; back.textContent = FLASH[idx].back; back.style.display='none';
      const flip = document.createElement('button'); flip.className='btn'; flip.textContent='Flip'; flip.onclick=()=>{ back.style.display= back.style.display==='none' ? 'block' : 'none' };
      const next = document.createElement('button'); next.className='btn'; next.textContent='Next'; next.style.marginLeft='8px'; next.onclick=()=>{ idx = (idx+1)%FLASH.length; front.textContent=FLASH[idx].front; back.textContent=FLASH[idx].back; back.style.display='none'};
      card.appendChild(front); card.appendChild(back); card.appendChild(flip); card.appendChild(next);
      container.appendChild(card); dynamic.appendChild(container);
    }

    // local leaderboard (simple localStorage)
    function saveScore(name,score){
      const key = 'scanfinity-leaderboard';
      const data = JSON.parse(localStorage.getItem(key) || '[]');
      data.push({name,score,ts:Date.now()});
      data.sort((a,b)=>b.score-a.score || a.ts-b.ts);
      localStorage.setItem(key, JSON.stringify(data.slice(0,50)));
    }
    function renderLeaderboard(){
      const key = 'scanfinity-leaderboard';
      const data = JSON.parse(localStorage.getItem(key) || '[]');
      leaderboardEl.innerHTML='';
      if(!data.length) { leaderboardEl.innerHTML='<div class=\"muted\">No scores yet. Play a game!</div>'; return }
      data
